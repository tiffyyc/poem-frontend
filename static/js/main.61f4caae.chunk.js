(this["webpackJsonppoem-frontend"]=this["webpackJsonppoem-frontend"]||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(31),s=n.n(r),c=(n(84),n(36)),i=n(3),o=n(7),l=n(118),j=(n(85),n(64)),u=n(1);var d=function(e){var t=e.variant,n=e.heading,r=e.message,s=Object(a.useState)(!0),c=Object(i.a)(s,2),o=c[0],l=c[1],d=Object(a.useState)(null),b=Object(i.a)(d,2),m=b[0],h=b[1];return console.log(m),Object(a.useEffect)((function(){var e=setTimeout((function(){return l(!1)}),5e3);return h(e),function(){clearTimeout(m)}}),[]),Object(u.jsx)(j.a,{variant:t,onClose:function(){return l(!1)},dismissible:!0,show:o,children:Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(j.a.Heading,{children:n}),Object(u.jsx)("p",{className:"alert-body",children:r})]})})},b=n(77),m=n(52),h=n(76),O=n(75),p=n(11),x=n(65),g=n.n(x),f=Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("img",{src:"https://i.imgur.com/G4m6Op1.jpeg",height:"35",width:"35",className:"d-inline-block align-top",alt:"profile icon"}),Object(u.jsxs)(h.a,{children:[Object(u.jsx)(p.c,{to:"/poem-create",className:"nav-link",children:"Create Poem"}),Object(u.jsx)(p.c,{to:"/change-password",className:"nav-link",children:"Change Password"}),Object(u.jsx)(p.c,{to:"/sign-out",className:"nav-link",children:"Sign Out"})]})]}),v=Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(p.c,{to:"/sign-up",className:"nav-link",style:{color:"#FFF"},children:"Sign Up"}),Object(u.jsx)(p.c,{to:"/sign-in",className:"nav-link",style:{color:"#FFF"},children:"Sign In"})]}),w=function(e){var t=e.user;return Object(u.jsx)(m.a,{className:g.a.navbar,expand:"md",children:Object(u.jsxs)(O.a,{children:[Object(u.jsx)(m.a.Brand,{children:Object(u.jsx)(p.b,{to:"/poems",style:{color:"#FFF",textDecoration:"none"},children:"Poem of the day"})}),Object(u.jsx)(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(u.jsx)(m.a.Collapse,{id:"basic-navbar-nav",className:g.a.menu,children:Object(u.jsxs)(b.a,{className:"ms-auto",children:[t?f:v,t&&Object(u.jsxs)("span",{className:"navbar-text me-2",style:{color:"#fff"},children:[" ",t.email]})]})})]})})},y=n(16),S=n.n(y),C=n(29),k="https://obscure-lake-47538.herokuapp.com",N="http://localhost:4741",P="localhost"===window.location.hostname?N:k,F=n(15),E=n.n(F),I=function(e,t,n){return E.a.post(P+"/sign-up/",{credentials:{email:e,password:t,password_confirmation:n}})},A=function(e,t){return E.a.post(P+"/sign-in/",{credentials:{email:e,password:t}})},_=function(e){return E.a.delete(P+"/sign-out/",{headers:{Authorization:"Bearer ".concat(e.token)}})},B=function(e,t,n){return E.a.patch(P+"/change-password/",{passwords:{old:e,new:t}},{headers:{Authorization:"Bearer ".concat(n.token)}})},D=n(10),T=n(28),G=function(e){var t=e.msgAlert,n=e.setUser,r=Object(a.useState)(""),s=Object(i.a)(r,2),c=s[0],l=s[1],j=Object(a.useState)(""),d=Object(i.a)(j,2),b=d[0],m=d[1],h=Object(a.useState)(""),O=Object(i.a)(h,2),p=O[0],x=O[1],g=Object(a.useState)(!1),f=Object(i.a)(g,2),v=f[0],w=f[1],y=function(){var e=Object(C.a)(S.a.mark((function e(a){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,I(c,b,p);case 4:return e.next=6,A(c,b);case 6:r=e.sent,n(r.data.user),t({heading:"Sign Up Success",message:"Succesfully registered! You've been signed in as well.",variant:"success"}),w(!0),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(1),l(""),m(""),x(""),t({heading:"Sign Up Failed with error: "+e.t0.message,message:"Registration failed. Email may be taken, or passwords don't match.",variant:"danger"});case 18:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return v?Object(u.jsx)(o.a,{to:"/"}):Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(u.jsx)("h3",{children:"Sign Up"}),Object(u.jsxs)(D.a,{onSubmit:y,children:[Object(u.jsxs)(D.a.Group,{controlId:"email",children:[Object(u.jsx)(D.a.Label,{children:"Email address"}),Object(u.jsx)(D.a.Control,{required:!0,type:"email",name:"email",value:c,placeholder:"Enter email",onChange:function(e){return l(e.target.value)}})]}),Object(u.jsxs)(D.a.Group,{controlId:"password",children:[Object(u.jsx)(D.a.Label,{children:"Password"}),Object(u.jsx)(D.a.Control,{required:!0,name:"password",value:b,type:"password",placeholder:"Password",onChange:function(e){return m(e.target.value)}})]}),Object(u.jsxs)(D.a.Group,{controlId:"passwordConfirmation",children:[Object(u.jsx)(D.a.Label,{children:"Password Confirmation"}),Object(u.jsx)(D.a.Control,{required:!0,name:"passwordConfirmation",value:p,type:"password",placeholder:"Confirm Password",onChange:function(e){return x(e.target.value)}})]}),Object(u.jsx)(T.a,{className:"mt-2",variant:"primary",type:"submit",children:"Submit"})]})]})})},U=function(e){var t=e.msgAlert,n=e.setUser,r=Object(a.useState)(""),s=Object(i.a)(r,2),c=s[0],l=s[1],j=Object(a.useState)(""),d=Object(i.a)(j,2),b=d[0],m=d[1],h=Object(a.useState)(!1),O=Object(i.a)(h,2),p=O[0],x=O[1],g=function(){var e=Object(C.a)(S.a.mark((function e(a){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,A(c,b);case 4:r=e.sent,n(r.data.user),t({heading:"Sign In Success",message:"Welcome!",variant:"success"}),x(!0),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),l(""),m(""),t({heading:"Sign In Failed with error: "+e.t0.message,message:"Failed to sign in. Check your email and password and try again.",variant:"danger"});case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return p?Object(u.jsx)(o.a,{to:"/poems"}):Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(u.jsx)("h3",{children:"Sign In"}),Object(u.jsxs)(D.a,{onSubmit:g,children:[Object(u.jsxs)(D.a.Group,{controlId:"email",children:[Object(u.jsx)(D.a.Label,{children:"Email address"}),Object(u.jsx)(D.a.Control,{required:!0,type:"email",name:"email",value:c,placeholder:"Enter email",onChange:function(e){return l(e.target.value)}})]}),Object(u.jsxs)(D.a.Group,{controlId:"password",children:[Object(u.jsx)(D.a.Label,{children:"Password"}),Object(u.jsx)(D.a.Control,{required:!0,name:"password",value:b,type:"password",placeholder:"Password",onChange:function(e){return m(e.target.value)}})]}),Object(u.jsx)(T.a,{className:"mt-2",variant:"primary",type:"submit",children:"Submit"})]})]})})},L=function(e){var t=e.msgAlert,n=e.clearUser,r=e.user,s=Object(a.useState)(!1),c=Object(i.a)(s,2),l=c[0],j=c[1];return Object(a.useEffect)((function(){(function(){var e=Object(C.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(r);case 2:t({heading:"Signed Out Successfully",message:"Come back soon!",variant:"success"}),n(),j(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),!r||l?Object(u.jsx)(o.a,{to:"/"}):""},q=function(e){var t=e.msgAlert,n=e.user,r=Object(a.useState)(""),s=Object(i.a)(r,2),c=s[0],l=s[1],j=Object(a.useState)(""),d=Object(i.a)(j,2),b=d[0],m=d[1],h=Object(a.useState)(!1),O=Object(i.a)(h,2),p=O[0],x=O[1],g=function(){var e=Object(C.a)(S.a.mark((function e(a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,B(c,b,n);case 4:t({heading:"Change Password Success",message:"Password changed successfully!",variant:"success"}),x(!0),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),l(""),m(""),t({heading:"Change Password Failed with error: "+e.t0.message,message:"Failed to change passwords. Check your old password and try again.",variant:"danger"});case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return!n||p?Object(u.jsx)(o.a,{to:"/poems"}):Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(u.jsx)("h3",{children:"Change Password"}),Object(u.jsxs)(D.a,{onSubmit:g,children:[Object(u.jsxs)(D.a.Group,{controlId:"oldPassword",children:[Object(u.jsx)(D.a.Label,{children:"Old password"}),Object(u.jsx)(D.a.Control,{required:!0,name:"oldPassword",value:c,type:"password",placeholder:"Old Password",onChange:function(e){return l(e.target.value)}})]}),Object(u.jsxs)(D.a.Group,{controlId:"newPassword",children:[Object(u.jsx)(D.a.Label,{children:"New Password"}),Object(u.jsx)(D.a.Control,{required:!0,name:"newPassword",value:b,type:"password",placeholder:"New Password",onChange:function(e){return m(e.target.value)}})]}),Object(u.jsx)(T.a,{className:"mt-2",variant:"primary",type:"submit",children:"Submit"})]})]})})},z=function(e){return E()({url:P+"/messages/".concat(e),method:"GET"})},H=function(e){var t=e.message,n=e.user,r=e.refresh,s=Object(a.useState)(t.text),c=Object(i.a)(s,2),o=c[0],l=c[1],j=Object(a.useState)(!1),d=Object(i.a)(j,2),b=d[0],m=d[1];return Object(u.jsxs)("div",{style:{display:"flex",borderBottom:"solid",paddingTop:"1rem",marginLeft:"10%",width:"80%"},children:[Object(u.jsx)("p",{style:{padding:"1rem",width:"20rem"},children:t.owner.email}),!b&&Object(u.jsx)("p",{style:{padding:"1rem",width:"80%"},children:o}),b&&Object(u.jsx)("input",{style:{padding:"1rem",width:"80%"},value:o,onChange:function(e){l(e.target.value)}}),Object(u.jsxs)("div",{style:{float:"right",width:"20rem"},children:[!b&&n&&n.token===t.owner.token&&Object(u.jsx)(T.a,{variant:"secondary",onClick:function(){m(!0)},style:{margin:"1rem"},children:"Edit"}),b&&Object(u.jsx)(T.a,{variant:"secondary",onClick:function(){(function(e,t,n){return E()({url:P+"/messages/".concat(e),headers:{Authorization:"Bearer ".concat(n.token)},method:"PATCH",data:{message:{text:t}}})})(t._id,o,n).then((function(){r(),m(!1)})).catch(console.error)},style:{margin:"1rem"},children:"Submit"}),b&&Object(u.jsx)(T.a,{variant:"secondary",onClick:function(){m(!1),l(t.text)},children:"Cancel"}),!b&&n&&n.token===t.owner.token&&Object(u.jsx)(T.a,{variant:"secondary",onClick:function(){(function(e,t){return E()({url:P+"/messages/".concat(e),method:"DELETE",headers:{Authorization:"Bearer ".concat(t.token)}})})(t._id,n).then((function(){r()})).catch(console.error)},children:"Delete"})]})]})},J=function(e){var t=e.user,n=Object(a.useState)([]),r=Object(i.a)(n,2),s=r[0],c=r[1],l=Object(a.useState)(""),j=Object(i.a)(l,2),d=j[0],b=j[1],m=Object(a.useState)(10),h=Object(i.a)(m,2),O=h[0],p=(h[1],Object(o.h)().id);Object(a.useEffect)((function(){z(p).then((function(e){c(e.data.messages.reverse().slice(0,O))})).catch(console.error)}),[]);var x=function(e){e.preventDefault(),function(e){return console.log(e),E()({url:P+"/messages/",method:"POST",headers:{Authorization:"Bearer ".concat(e.owner.token)},data:{message:{board:e.board,text:e.text,owner:e.owner}}})}({board:p,text:d,owner:t}).then((function(){b(""),g()})).catch(console.error)},g=function(e){z(p).then((function(e){c(e.data.messages.reverse().slice(0,O))})).catch(console.error)};return Object(u.jsxs)("div",{style:{marginTop:"2rem",width:"100%",height:"500px",backgroundColor:"#fff"},children:[Object(u.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"0 10%",padding:"2%"},children:[Object(u.jsx)("div",{}),Object(u.jsx)("h4",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:"Comments"}),Object(u.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"right",marginRight:"10%"}})]}),t&&Object(u.jsxs)("form",{onSubmit:x,style:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:"1rem",margin:"0 10%"},children:[Object(u.jsx)("p",{style:{margin:"auto 0.5rem auto 1rem"},children:"New message: "}),Object(u.jsx)("input",{style:{width:"50%",height:"3rem"},value:d,onChange:function(e){e.preventDefault(),b(e.target.value)}}),Object(u.jsx)(T.a,{variant:"secondary",onClick:x,style:{margin:"1rem"},children:"Submit"})]}),s.map((function(e){return Object(u.jsx)(H,{message:e,user:t,refresh:g},e._id)}))]})},W=n(2),R=function(e){return E.a.delete("".concat(P,"/poems/").concat(e),{})},Y=function(e){var t=e.user,n=Object(o.h)().id,r=Object(a.useState)({}),s=Object(i.a)(r,2),c=s[0],l=s[1],j=Object(a.useState)(!1),d=Object(i.a)(j,2),b=d[0],m=d[1];Object(a.useEffect)((function(){(function(e){return E.a.get("".concat(P,"/poems/").concat(e),{})})(n).then((function(e){l(e.data.poem)}))}),[]);var h=function(){var e=Object(C.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(c._id);case 3:m(!0),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return b?Object(u.jsx)(o.a,{to:"/"}):Object(u.jsxs)("div",{style:{padding:"4rem"},children:[Object(u.jsx)("h4",{children:c.title}),Object(u.jsxs)("p",{children:["writer: ",c.writer]}),Object(u.jsxs)("p",{children:["description: ",c.description]}),Object(u.jsx)(T.a,{variant:"secondary",onClick:h,children:"Delete"}),Object(u.jsx)(J,{user:t})]})},Z=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){E.a.get(P+"/poems").then((function(e){r(e.data.poems),console.log(e.data)})).catch(console.error)}),[]);var s=n.map((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)(p.b,{to:"/poems/".concat(e._id),children:Object(u.jsx)("h5",{children:e.title})}),Object(u.jsxs)("p",{children:["Writer: ",e.writer]})]},e._id)}));return Object(u.jsxs)("div",{style:{padding:"4rem"},children:[Object(u.jsx)("h4",{children:"Poem of the day"}),Object(u.jsx)("p",{children:"list of poems"}),s]})},K=n(8),M=function(e){var t=e.user,n=Object(a.useState)({}),r=Object(i.a)(n,2),s=r[0],c=r[1],l=Object(a.useState)(!1),j=Object(i.a)(l,2),d=j[0],b=j[1],m=function(e){console.log(e.target.name),console.log(s),c(Object(W.a)(Object(W.a)({},s),{},Object(K.a)({},e.target.name,e.target.value)))};return d?Object(u.jsx)(o.a,{to:"/poems"}):Object(u.jsx)("div",{style:{padding:"4rem"},children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(e,t){return E.a.post("".concat(P,"/poems"),{poem:Object(W.a)({},e)},{headers:{Authorization:"Bearer ".concat(t.token)}})}(s,t).then((function(){b(!0)}))},children:[Object(u.jsxs)("label",{style:{marginBottom:"1rem"},children:["Title:",Object(u.jsx)("input",{type:"text",name:"title",value:s.title,onChange:m})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{style:{marginBottom:"1rem"},children:["Writer:",Object(u.jsx)("input",{type:"text",name:"writer",value:s.writer,onChange:m})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{style:{marginBottom:"1rem"},children:["Description:",Object(u.jsx)("input",{type:"textarea",name:"description",value:s.description,onChange:m})]}),Object(u.jsx)("br",{}),Object(u.jsx)(T.a,{variant:"dark",type:"submit",value:"Submit",children:"Create Poem"})]})})},Q=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)([]),j=Object(i.a)(s,2),b=j[0],m=j[1],h=function(e){var t=e.heading,n=e.message,a=e.variant,r=Object(l.a)();m((function(e){return[].concat(Object(c.a)(e),[{heading:t,message:n,variant:a,id:r}])}))};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(w,{user:n}),b.map((function(e){return Object(u.jsx)(d,{heading:e.heading,variant:e.variant,message:e.message,id:e.id},e.id)})),Object(u.jsx)("main",{className:"container",children:Object(u.jsxs)(o.d,{children:[Object(u.jsx)(o.b,{path:"/sign-up",element:Object(u.jsx)(G,{msgAlert:h,setUser:r})}),Object(u.jsx)(o.b,{path:"/sign-in",element:Object(u.jsx)(U,{msgAlert:h,setUser:r})}),Object(u.jsx)(o.b,{path:"/sign-out",element:Object(u.jsx)(L,{msgAlert:h,clearUser:function(){return r(null)},user:n})}),Object(u.jsx)(o.b,{path:"/change-password",element:Object(u.jsx)(q,{msgAlert:h,user:n})}),Object(u.jsx)(o.b,{path:"/poems/:id",element:Object(u.jsx)(Y,{user:n})}),Object(u.jsx)(o.b,{path:"/poems",element:Object(u.jsx)(Z,{user:n})}),Object(u.jsx)(o.b,{path:"/poem-create",element:Object(u.jsx)(M,{user:n})})]})})]})},V=Object(u.jsx)(p.a,{basename:"/poem-frontend",children:Object(u.jsx)(Q,{})});s.a.render(V,document.getElementById("root"))},65:function(e,t,n){e.exports={navbar:"Navbar_navbar__3GgJF",menu:"Navbar_menu__1zHTZ"}},84:function(e,t,n){},85:function(e,t,n){}},[[111,1,2]]]);
//# sourceMappingURL=main.61f4caae.chunk.js.map